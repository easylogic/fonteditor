<!DOCTYPE html> <html lang="zh-cn"> <head> <meta charset="UTF-8"> <title>FontMoa - FontEditor</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" type="text/css" href="./dep/bootstrap/css/bootstrap.min.css"> <link rel="stylesheet" type="text/css" href="./css/main.css"> <style type="text/css" id="simple-font"> </style> </head> <body class='simple-mode only-editor show-sidebar show-main show-editor'> <section class="navbar" role="navigation"> <div class="logo"><a href="/" title="Welcome to FontMOA!!">FontMOA</a> <span class='language'> <a href="simple.html" title="한국어">한국어</a> <a href="simple-en.html" title="English">English</a> <a href="simple-cn.html" title="中文">中文</a> </span> </div> </section> <section class="toolbar action-groups" role="tools"> Download <a class='btn btn-flat' data-action="download-glyf" title="Export image"><i class='ico i-file-image'></i></a> <!--<a class='btn btn-flat' data-action="export" data-type="otf" title=""><i class="ico i-ttf"></i></a> --> <a class='btn btn-flat' data-action="export" data-type="ttf" title="导出ttf"><i class="ico i-ttf"></i></a> <a class='btn btn-flat' data-action="export" data-type="woff" title="导出woff"><i class="ico i-woff"></i></a> <a class='btn btn-flat' data-action="export" data-type="zip" title="导出zip,包含ttf,woff,eot,svg等格式字体和icon示例"><i class="ico i-zip"></i></a> <a class='change-editor' href='index-cn.html'>Advanced mode</a> </section> <section class="sidebar"> <!--<div class="open-btn"><i class='ico i-gear'></i></div>--> <div class="project"> <div class="project-title">项目列表 <div class="project-btns action-groups"> <button data-action="new" type="button" class="btn btn-flat" title="新建ttf字体文件"><i class="ico ico-left i-new"></i> 新建ttf字体文件</button> <button data-action="open" type="button" class="btn btn-flat" title="打开ttf,woff,eot,otf格式字体文件"><i class="ico ico-left i-open"></i> 打开格式字体文件</button> </div> <div class="project-btns action-groups" style="float:right"> <button data-action="save" type="button" class="btn btn-flat" title="保存项目"><i class="ico ico-left i-save"></i> 保存项目</button> <div class="btn-group action-groups"> <button type="button" class="btn btn-flat dropdown-toggle" data-toggle="dropdown"title="工具"> <i class="ico i-gear" ></i> 工具 <span class="drop ico i-down"></span> </button> <ul class="dropdown-menu dropdown-menu-right" role="menu"> <li><a data-disabled="1" data-action="setting-name" >字体信息</a></li> <li><a data-disabled="1" data-action="setting-metrics">字体度量</a></li> </ul> </div> </div> </div> <div id="project-list" class="project-list"></div> </div> <div class="glyf-list-manager"> <div class='glyf-list-title'> Glyf <span class='glyf-total-count'></span> <div class="btn-group action-groups"> <button type="button" class="btn btn-flat dropdown-toggle" data-toggle="dropdown" title="工具"> <i class="ico i-gear" ></i> 工具 <span class="drop ico i-down"></span> </button> <ul class="dropdown-menu dropdown-menu-right" role="menu"> <li><a data-disabled="1" data-action="setting-editor">设置</a></li> <li class="divider"></li> <li><a data-disabled="1" data-action="find-glyf">Find Glyf</a></li> <li class="divider"></li> <li><a data-disabled="1" data-action="setting-glyf-name">生成字形名称</a></li> <li><a data-disabled="1" data-action="setting-glyf-clearname">清除字形名称</a></li> <li><a data-disabled="1" data-action="setting-optimize">优化字体</a></li> <li><a data-disabled="1" data-action="setting-sort">按代码点进行排序</a></li> <li><a data-disabled="1" data-action="setting-compound2simple">复合字形转简单字形</a></li> <li class="divider"></li> <li><a data-disabled="1" data-action="setting-glyf-generate-template">Generate Glyf Name Template</a></li> <li><a data-disabled="1" data-action="setting-make-korean-glyf">Make korean glyf</a></li> </ul> </div> <div class="btn-group action-groups"> <button type="button" class="btn btn-flat dropdown-toggle" data-toggle="dropdown" title="导入"> <i class="ico i-open" ></i> 导入 <span class="drop ico i-down"></span> </button> <ul class="dropdown-menu dropdown-menu-right" role="menu"> <li><a data-disabled="1" data-action="import" title="导入svg格式字体文件">导入 - 导入svg</a></li> <!--<li><a data-disabled="1" data-action="import-pic" title="导入包含字形的图片">导入 - 导入图片</a></li> --> <li><a data-disabled="1" data-action="import" title="导入ttf,woff,eot,otf格式字体文件">导入 - 导入字体文件</a></li> <li><a data-disabled="1" data-action="add-online">加载线上字体</a></li> <li><a data-disabled="1" data-action="add-url">从URL加载字体</a></li> </ul> </div> <div class="btn-group action-groups"> <button data-action="add-new" type="button" class="btn btn-flat btn-new" title="新字形"><i class="ico ico-left i-add"></i> 新字形</button> </div> <ul id="glyf-list-commandmenu" class="command-groups"></ul> </div> <div id="glyf-list-view"> <div id="glyf-list-pager" class="pager"></div> <div id="glyf-list" class="glyf-list"></div> </div> </div> </section> <section class="main editing"> </section> <div class="editor-area"> <div class="glyf-selector-tabs"> <div class="tab-item " data-value="project">Project</div> <div class="tab-item" data-value="classic">Classic</div> <div class="tab-item selected" data-value="simple">Simple</div> </div> <div class="notebook notebook-left"> <div class="simple-glyf-selector"> <div class="text-view" > <div class="text-input" contenteditable="true" tabindex="-1" placeholder="Click!! Write a text."></div> </div> <div class="font-view-description description"> <label>Font Size</label> <span style="display:inline-block;width:200px;vertical-align:middle;"><input type="range" min="5" max="100" id="fontSize" style="width:100px;display:inline-block;vertical-align:middle;"/> <input type="number" min="5" max="100" id="fontSizeInput" style="width:60px;text-align:center;display:inline-block;vertical-align:middle;height:24px;"/> px</span> <label><input type="checkbox" checked id="guidChar"/> View guide characters</label> &nbsp; <button type="button" class="btn btn-flat delete-glyf">Delete glyf</button> </div> <div class="font-view"></div> </div> <div class="classic-glyf-selector"> </div> <div class="project-glyf-selector"> </div> </div> <div class="notebook notebook-right"> <section class="editor editing"> <ul id="editor-commandmenu" class="command-groups"></ul> <div id="glyf-editor" class="glyf-editor" oncontextMenu="return false"></div> <ul id="editor-commandmenu-bottom" class="command-groups-bottom"></ul> </section> </div> <div class="chain"> <div class="ring"><div class="circle left"></div><div class="circle right"></div><div class="rect"></div></div> <div class="ring"><div class="circle left"></div><div class="circle right"></div><div class="rect"></div></div> <div class="ring"><div class="circle left"></div><div class="circle right"></div><div class="rect"></div></div> <div class="ring"><div class="circle left"></div><div class="circle right"></div><div class="rect"></div></div> <div class="ring"><div class="circle left"></div><div class="circle right"></div><div class="rect"></div></div> </div> </div> <div class="modal" id="model-dialog" tabindex="-1" role="dialog" aria-labelledby="model-label" aria-hidden="true" data-backdrop="false"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">关闭</span></button> <h4 class="modal-title" id="model-label">设置</h4> </div> <div class="modal-body"></div> <div class="modal-footer"> <button type="button" class="btn btn-flat" data-dismiss="modal">取消</button> <button type="button" class="btn btn-flat btn-confirm">确定</button> </div> </div> </div> </div> <div id="selection-range" class="selection-range"></div> <div id="loading" class="loading"><span></span></div> <form id="font-form" style="width:0px;height:0px;overflow:hidden;"><input id="font-import" type="file" multiple="multiple"></form> <iframe id="sync-frame" name="sync-frame" width="0" height="0" frameborder="0" style="display:none;"></iframe> <script src="./dep/esl.js"></script> <script src="./dep/jquery.min.js"></script> <script src="./dep/jqColorPicker.min.js"></script> <script src="./dep/bootstrap/js/bootstrap.min.js"></script> <script src="./dep/paper-full.js"></script> <script src="./dep/hidpi-canvas.js"></script> <script> window.language = 'zh-cn'; require.config({ baseUrl: './src', packages: [ { name: 'fonteditor-core', location: '../dep/fonteditor-core/src' } ], paths: { utpl: '../dep/utpl.min', JSZip: '../dep/jszip/jszip.min', inflate: '../dep/pako_inflate.min', deflate: '../dep/pako_deflate.min' } }); define('jquery', window.jQuery); paper.install(window); define('paper', window.paper); require(['fonteditor/main'], function () { var backgroundIndex = Math.floor( (Math.random() * 9)); if (backgroundIndex < 1) { backgroundIndex = 1; } backgroundIndex = 7; $("body").addClass('back-' + backgroundIndex); $("#innerdialog-setting-glyf").appendTo(".notebook-right"); $("#innerdialog-setting-shape-maker").appendTo(".notebook-right"); $(".glyf-list-manager").appendTo(".classic-glyf-selector"); $(".project").appendTo(".project-glyf-selector"); var $fontView = $(".font-view"); $(".open-btn").on('click', function () { $('.navbar').toggleClass('on'); $('.sidebar').toggleClass('on'); $('.editor-area').toggleClass('on'); }); $("#fontSize").on('change' ,function () { var fontSize = $(this).val(); $fontView.css('font-size', fontSize + 'px'); $("#fontSizeInput")[0].value = fontSize; }).val(parseInt($fontView.css('font-size').replace('px', ''))).change(); $("#fontSizeInput").on('change', function () { var fontSize = $(this).val(); $fontView.css('font-size', fontSize + 'px'); $("#fontSize").val(fontSize); }); $("#guidChar").on('click', function () { $fontView.toggleClass('no-border', !$(this).prop('checked')); }); $(".delete-glyf").on("click", function () { var $selected = $fontView.find(".selected"); var text = $selected.text() || $selected.data('empty-ch'); if (text == '&nbsp;') { text = ' '; } var codepoint = text.codePointAt(0); var unicode = codepoint; program.viewer.removeSelectedGlyf(unicode); /* 현재 선택된 것을 다시 클릭해서 처리 상태를 변경한다. */ $($selected[0]).click(); }); $(".glyf-selector-tabs").on("click", ".tab-item", function () { $(this).parent().find(".selected").removeClass('selected'); $(this).addClass('selected'); if ($(this).data('value') == 'classic') { $(".notebook-left").addClass('classic-mode').removeClass('project-mode simple-mode'); } else if ($(this).data('value') == 'project') { $(".notebook-left").addClass('project-mode').removeClass('classic-mode simple-mode'); } else { $(".notebook-left").addClass('simple-mode').removeClass('classic-mode project-mode'); } }); var update_font_timer = null; function update_font() { if (window.program) { if (update_font_timer) { clearTimeout(update_font_timer); } update_font_timer = setTimeout(function () { var cloneTTF = program.ttfManager.clone({ empty: true, reduceGlyf: $(".text-input").text(), optimize: true }); console.log(cloneTTF); var base64 = program.previewer.toBase64(cloneTTF.get()); $("#simple-font").html("@font-face { font-family: simple; src: url('" + base64 + "'); }"); }, 200); } } function init_text_select () { var arr = $(".text-input").text().split(''); var temp = []; var pointList= []; for(var i = 0, len = arr.length; i < len; i++) { var ch = arr[i]; var codepoint = arr[i].codePointAt(0); if (ch == ' ') { ch = '&nbsp;'; } var glyf = "<span class='glyf' data-empty-ch='"+ch+"'>" + ch + "</span>"; temp.push(glyf); pointList.push(codepoint); } return { template : temp, codepoint : pointList } } $(".text-input").on("keyup", function () { var unicodeChar = $fontView.find(".selected").data('empty-ch'); var ret = init_text_select(); var $span = $("<span />").html(ret.template); $(".font-view").html($span).data('codepoint', ret.codepoint); $(".font-view").find("[data-empty-ch='"+unicodeChar+"']").toggleClass('selected', true); update_font(); }); $(".font-view").on('click', '.glyf', function () { var self = this; var width = $(self).width(); var height = $(self).height(); var text = $(this).text() || $(this).data('empty-ch'); if (text == '&nbsp;') { text = ' '; } var codepoint = text.codePointAt(0); var unicode = codepoint; $fontView.find(".selected").removeClass('selected').each(function() { $(this).html($(this).data('empty-ch')); }); $fontView.find("[data-empty-ch='"+$(self).text()+"']").toggleClass('selected', true); console.log(unicode); program.viewer.showGlyfByUnicode(unicode, function (isEmptyChar) { var $char = $fontView.find("[data-empty-ch='"+$(self).text()+"']"); if (isEmptyChar) { $char.empty(); /* 이미지 편집기를 위에다 넣을까? 그런 다음 에디터를 보여줘? */ var fontSize = parseInt($fontView.css('font-size').replace('px', '')) * Math.floor(512/Math.max(width, height)); var fontFamily = $fontView.css('font-family').split(",").pop(); program.fire('import-pic', { unicode : unicode, fontSize : fontSize, fontFamily : fontFamily, color: '#7a7a7a' }); } }); }); program.editor.editor.on('save', function (opt) { $(".text-input").trigger("keyup"); }); }); </script> </body> </html> 